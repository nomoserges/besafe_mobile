{"version":3,"sources":["webpack:///./src/app/auth/login/login.module.ts","webpack:///./src/app/auth/login/login.page.html","webpack:///./src/app/auth/login/login.page.scss","webpack:///./src/app/auth/login/login.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEJ;AAEzC,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,qDAAS;KACrB;CACF,CAAC;AAWF;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAT3B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW;gBACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,qDAAS,CAAC;SAC1B,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;ACzB5B,wUAAwU,sDAAsD,aAAa,aAAa,eAAe,kxBAAkxB,kLAAkL,4K;;;;;;;;;;;ACA32C,4BAA4B,0BAA0B,kBAAkB,EAAE,gBAAgB,0BAA0B,EAAE,OAAO,gBAAgB,EAAE,+CAA+C,2kB;;;;;;;;;;;;;;;;;;;;;ACA5I;AACT;AACQ;AAEP;AACI;AAQ9C;IAEE,mBACU,WAA2B,EAC3B,MAAsB,EACtB,OAAuB,EACxB,eAAgC;QAH/B,gBAAW,GAAX,WAAW,CAAgB;QAC3B,WAAM,GAAN,MAAM,CAAgB;QACtB,YAAO,GAAP,OAAO,CAAgB;QACxB,oBAAe,GAAf,eAAe,CAAiB;IAAI,CAAC;IAExC,gCAAY,GAAlB,UAAmB,YAAY;;;;;4BACf,qBAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;4BAC9C,OAAO,EAAE,YAAY;4BACrB,QAAQ,EAAE,IAAI;yBACf,CAAC;;wBAHI,KAAK,GAAG,SAGZ;wBACF,KAAK,CAAC,OAAO,EAAE,CAAC;;;;;KACjB;IAED,4BAAQ,GAAR;QAAA,iBAUC;QATC,IAAI,UAAgB,CAAC;QACrB,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;QAC3C,UAAU,CAAC,IAAI,CAAC,UAAC,GAAG;YAClB,IAAI,GAAG,KAAK,IAAI,IAAI,GAAG,KAAK,SAAS,EAAE;aAEtC;iBAAM;gBACL,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aACnC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yBAAK,GAAL,UAAM,IAAI;QAAV,iBAWC;QAVC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,UAAC,GAAG;YAC/C,IAAI,GAAG,CAAC,SAAS,CAAC,KAAK,OAAO,EAAE;gBAC9B,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;aACnC;iBAAM;gBACL,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;gBACjE,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;gBAC7D,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACrD,KAAI,CAAC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aACnC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAvCU,SAAS;QALrB,+DAAS,CAAC;YACT,QAAQ,EAAE,WAAW;YACrB,8FAAgC;;SAEjC,CAAC;+EAI0B,yDAAW;YACX,sDAAM;YACN,sDAAO;YACP,8DAAe;OAN9B,SAAS,CAyCrB;IAAD,gBAAC;CAAA;AAzCqB","file":"auth-login-login-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","module.exports = \"<ion-content color=\\\"primary\\\" padding>\\r\\n  <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"login(form)\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row color=\\\"primary\\\" justify-content-center>\\r\\n        <ion-col align-self-center size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\r\\n          <div text-center style=\\\"margin-top:auto;\\\">\\r\\n            <ion-thumbnail style=\\\"width:128px;height:128px;margin: auto;display: block;\\\">\\r\\n              <img src=\\\"../../../assets/besafe_logo.png\\\" size=\\\"128\\\" class=\\\"auth-logo-circle\\\">\\r\\n            </ion-thumbnail>\\r\\n          </div>\\r\\n          <div padding>\\r\\n            <ion-item>\\r\\n              <ion-input name=\\\"u_pseudo\\\" type=\\\"text\\\" placeholder=\\\"Email or phone\\\" ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n            <ion-item>\\r\\n              <ion-input name=\\\"u_password\\\" type=\\\"password\\\" placeholder=\\\"Password\\\" ngModel required></ion-input>\\r\\n            </ion-item>\\r\\n          </div>\\r\\n          <div padding>\\r\\n            <ion-button type=\\\"submit\\\" [disabled]=\\\"form.invalid\\\" expand=\\\"block\\\">Login</ion-button>\\r\\n          </div>\\r\\n          <div text-center align-self-center padding style='font-size: 80%;'>\\r\\n            Need an account ? <a routerLink='/register'>Register here</a>\\r\\n          </div>\\r\\n          <div text-center align-self-center padding style='font-size: 80%;'>\\r\\n            <a routerLink='/home'>Loss password ?</a>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </form>\\r\\n</ion-content>\"","module.exports = \"ion-item {\\n  --background: #3880ff;\\n  --color: #fff; }\\n\\nion-button {\\n  --background: #062f77; }\\n\\na {\\n  color: #fff; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXV0aC9sb2dpbi9FOlxcd2FtcDY0XFx3d3dcXGJlc2FmZV9tb2JpbGUvc3JjXFxhcHBcXGF1dGhcXGxvZ2luXFxsb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxxQkFBYTtFQUNiLGFBQVEsRUFBQTs7QUFFWjtFQUNJLHFCQUFhLEVBQUE7O0FBRWpCO0VBQ0ksV0FBVyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvYXV0aC9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24taXRlbXtcclxuICAgIC0tYmFja2dyb3VuZDogIzM4ODBmZjtcclxuICAgIC0tY29sb3I6ICNmZmY7XHJcbn1cclxuaW9uLWJ1dHRvbntcclxuICAgIC0tYmFja2dyb3VuZDogIzA2MmY3NztcclxufVxyXG5he1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbn1cclxuIl19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\nimport { ToastController } from '@ionic/angular';\r\n\r\nimport { Router } from  \"@angular/router\";\r\nimport { AuthService } from '../auth.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n\r\n  constructor(\r\n    private authService   : AuthService, \r\n    private router        : Router,\r\n    private storage       : Storage,\r\n    public toastController: ToastController) { }\r\n    \r\n  async presentToast(toastMessage) {\r\n    const toast = await this.toastController.create({\r\n      message: toastMessage,\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  ngOnInit() {\r\n    var loginState : any;\r\n    loginState = this.authService.isLoggedIn();\r\n    loginState.then((val)=>{\r\n      if (val === null || val === undefined) {\r\n\r\n      } else {\r\n        this.router.navigateByUrl('home');\r\n      }\r\n    });\r\n  }\r\n\r\n  login(form) {\r\n    this.authService.login(form.value).subscribe((res)=>{\r\n      if (res['msgType'] === \"error\") {\r\n        this.presentToast(res['msgBody']);\r\n      } else {\r\n        this.storage.set(\"ACCESS_TOKEN\", res['msgData']['access_token']);\r\n        this.storage.set(\"EXPIRES_IN\", res['msgData']['expires_in']);\r\n        this.storage.set(\"userid\", res['msgData']['userid']);\r\n        this.router.navigateByUrl('home');\r\n      }\r\n    });\r\n  }\r\n  \r\n}\r\n"],"sourceRoot":""}